{% extends 'base.html' %}
{% load static %}

{% block title %}Home - MyTodo{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/landing/home.css' %}">

<!-- Hero Section -->
<section class="hero-section">
    <div class="hero-text">
        <h1 class="hero-title">MyTodo – Organize Your Day</h1>
        <p class="hero-description">
            Manage all your tasks in one place. Simple, fast, and designed to help you 
            focus on what really matters. Sign up today and start achieving more.
        </p>
        <button class="cta-button">Get started</button>
    </div>

    <div class="hero-content">
        <div class="clipboard-container">
            <div class="clipboard">
                <div class="clipboard-clip"></div>
                <div class="clipboard-body">
                    <div class="task-item completed">
                        <div class="checkbox checked"></div>
                        <div class="task-line"></div>
                    </div>
                    <div class="task-item">
                        <div class="checkbox"></div>
                        <div class="task-line"></div>
                    </div>
                    <div class="task-item">
                        <div class="checkbox"></div>
                        <div class="task-line"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="description-text">
            <p>
                MyTodo yordamida har kuni vazifalaringizni 
                samarali boshqarishingiz mumkin. Har bir vazifani 
                yaratish, tahrirlash, bajarilganligini belgilash va 
                o'chirish imkoniyati mavjud.
            </p>
        </div>
    </div>
</section>

<!-- Authenticated User Section (ToDo / Homework) -->
{% if user.is_authenticated %}
<section class="user-dashboard">
    <div class="dashboard-container">









                <div class="todo-section">
                    <h2>ToDo List</h2>

                        <form method="POST" action="{% url 'home' %}" class="todo-form">
                        {% csrf_token %}
                        
                        <input type="hidden" name="add_todo" value="1">

                        <input type="text" name="title" placeholder="Yangi vazifa..." required>

                        <input type="date" name="deadline" class="deadline-input">

                        <button type="submit" class="btn-submit">+</button>
                        </form>


                        <!-- ToDo ro‘yxati -->
                        {% if todos %}
                        <ul class="todo-list">
                            {% for todo in todos %}
                            <li class="todo-item-wrapper">
                                <div class="todo-item {{ todo.color_class }}">
                                    <span class="todo-title">{{ todo.title }}</span>

                                    {% if todo.deadline %}
                                    <span class="todo-deadline">
                                        {{ todo.deadline|date:"d M, Y" }} - 
                                        {% if todo.days_left > 0 %}
                                            {{ todo.days_left }} kun{% if todo.days_left > 1 %}{% endif %} qoldi
                                        {% elif todo.days_left == 0 %}
                                            Bugun!
                                        {% else %}
                                            Sana Tugab bolgan
                                        {% endif %}
                                    </span>
                                    {% endif %}

                                </div>

                                <form method="POST" action="{% url 'todo_edit' todo.id %}" class="todo-delete-form">
                                    {% csrf_token %}
                                    <button type="submit" class="btn-edit">Edit</button>
                                </form>



                                <form method="POST" action="{% url 'todo_delete' todo.id %}" class="todo-delete-form">
                                    {% csrf_token %}
                                    <button type="submit" class="btn-delete">Delete</button>
                                </form>
                            </li>
                            {% endfor %}
                        </ul>
                        {% else %}
                        <p class="empty-msg">Hozircha vazifangiz yo‘q.</p>
                        {% endif %}

                        <!-- Home tugmasi -->
                        <a href="{% url 'todo_list' %}" class="btn-submit" style="margin-top: 10px; display: inline-block;">
                            ToDo Listga o‘tish
                        </a>
                </div>






        <!-- Homework Section -->
        <div class="homework-section">
            <h2>Mening Homework’larim</h2>
            {% if homework %}
            <ul class="homework-list">
                {% for hw in homework %}
                <li class="homework-item">
                    <span class="homework-subject">{{ hw.subject }}</span>
                    <span class="homework-hours">{{ hw.hours_spent }} soat</span>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p class="empty-msg">Hozircha homework yo‘q.</p>
            {% endif %}
        </div>

    </div>
</section>
{% endif %}



{% endblock %}
